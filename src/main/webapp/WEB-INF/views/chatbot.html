<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>SoulSpace - AI Guide</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f9fafb; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        
        .main-content {
            margin-left: 16rem;
            flex: 1; /* Take remaining height */
            display: flex;
            flex-direction: column;
            height: 100%; /* Ensure full height */
            transition: margin-left 0.3s ease;
        }
        
        @media (max-width: 1024px) {
            .main-content { margin-left: 0; height: calc(100vh - 60px); /* Subtract nav height roughly */ }
        }

        .chat-container { flex: 1; display: flex; flex-direction: column; background: white; max-width: 1000px; margin: 0 auto; width: 100%; border-left: 1px solid #e5e7eb; border-right: 1px solid #e5e7eb; }
        .chat-header { padding: 1rem; border-bottom: 1px solid #e5e7eb; background: white; font-weight: 600; display: flex; justify-content: space-between; align-items: center; }
        
        .chat-messages { flex: 1; overflow-y: auto; padding: 1.5rem; background: #f9fafb; }
        .message { max-width: 80%; padding: 1rem; border-radius: 1rem; margin-bottom: 1rem; font-size: 0.95rem; line-height: 1.5; }
        .message.bot { background: white; border: 1px solid #e5e7eb; border-top-left-radius: 0; margin-right: auto; }
        .message.user { background: #3b82f6; color: white; border-top-right-radius: 0; margin-left: auto; }

        .input-area { padding: 1rem; background: white; border-top: 1px solid #e5e7eb; display: flex; gap: 0.5rem; }
        .chat-input { flex: 1; padding: 0.75rem; border: 1px solid #e5e7eb; border-radius: 0.5rem; outline: none; }
        .send-btn { padding: 0.75rem 1.5rem; background: #3b82f6; color: white; border: none; border-radius: 0.5rem; font-weight: 500; cursor: pointer; }
    </style>
</head>
<body>
    <div th:replace="~{navigation :: sidebar-fragment}"></div>

    <main class="main-content">
        <div class="chat-container">
            <div class="chat-header">
                <span>SoulSpace AI Guide</span>
                <span style="font-size: 0.75rem; color: #10b981;">‚óè Online</span>
            </div>
            
            <div class="chat-messages" id="messages">
                <div class="message bot">
                    Hello! I'm your AI wellness companion. How are you feeling today?
                </div>
            </div>

            <div class="input-area">
                <input type="text" class="chat-input" placeholder="Type a message..." id="userCheck">
                <button class="send-btn" onclick="sendMsg()">Send</button>
            </div>
        </div>
    </main>

    <script>
        function sendMsg() {
            const input = document.getElementById('userCheck');
            const container = document.getElementById('messages');
            if(input.value.trim() === "") return;

            // Add User Message
            const userDiv = document.createElement('div');
            userDiv.className = 'message user';
            userDiv.innerText = input.value;
            container.appendChild(userDiv);

            // Mock Bot Response
            setTimeout(() => {
                const botDiv = document.createElement('div');
                botDiv.className = 'message bot';
                botDiv.innerText = "I hear you. Tell me more about that.";
                container.appendChild(botDiv);
                container.scrollTop = container.scrollHeight;
            }, 1000);

            input.value = "";
            container.scrollTop = container.scrollHeight;
        }
    </script>
</body>
</html>
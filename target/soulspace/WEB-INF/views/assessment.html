<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoulSpace - Self-Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            font-size: 16px;
            line-height: 1.5;
            color: #1a1a1a;
            background: #f9fafb;
        }

        .container {
            padding: 1rem;
            max-width: 60rem;
            margin: 0 auto;
        }

        @media (min-width: 1024px) {
            .container {
                padding: 2rem;
            }
        }

        .page-header {
            padding-top: 1rem;
            margin-bottom: 1.5rem;
        }

        .page-header h1 {
            font-size: 1.875rem;
            font-weight: 500;
            color: #1a1a1a;
            margin-bottom: 0.25rem;
        }

        .page-header p {
            color: #6b7280;
        }

        /* Assessment Selection */
        .assessment-grid {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        @media (min-width: 768px) {
            .assessment-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .assessment-card {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            cursor: pointer;
            transition: all 0.2s;
        }

        .assessment-card:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .assessment-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .assessment-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .assessment-icon svg {
            width: 1.5rem;
            height: 1.5rem;
        }

        .assessment-card h3 {
            font-size: 1.125rem;
            font-weight: 500;
            color: #1a1a1a;
            margin-bottom: 0.5rem;
        }

        .assessment-card p {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .assessment-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 0.875rem;
            color: #6b7280;
        }

        .assessment-meta-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .assessment-meta-item svg {
            width: 1rem;
            height: 1rem;
        }

        /* Quiz Interface */
        .quiz-container {
            display: none;
        }

        .quiz-container.active {
            display: block;
        }

        .quiz-header {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            margin-bottom: 1.5rem;
        }

        .quiz-title {
            font-size: 1.25rem;
            font-weight: 500;
            color: #1a1a1a;
            margin-bottom: 0.5rem;
        }

        .quiz-progress {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0.75rem;
        }

        .progress-bar {
            width: 100%;
            height: 0.5rem;
            background: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #9333ea);
            border-radius: 9999px;
            transition: width 0.3s;
        }

        .question-card {
            background: white;
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            margin-bottom: 1.5rem;
        }

        .question-number {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0.5rem;
        }

        .question-text {
            font-size: 1.25rem;
            font-weight: 500;
            color: #1a1a1a;
            margin-bottom: 1.5rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .option {
            padding: 1rem;
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .option:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .option.selected {
            border-color: #2563eb;
            background: #eff6ff;
        }

        .option input[type="radio"] {
            width: 1.25rem;
            height: 1.25rem;
            cursor: pointer;
        }

        .option label {
            flex: 1;
            cursor: pointer;
        }

        .navigation-buttons {
            display: flex;
            gap: 1rem;
            justify-content: space-between;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            font-size: 1rem;
        }

        .btn-outline {
            background: white;
            border: 1px solid #d1d5db;
            color: #1a1a1a;
        }

        .btn-outline:hover {
            background: #f9fafb;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #9333ea);
            color: white;
        }

        .btn-primary:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 6px rgba(59, 130, 246, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Results Screen */
        .results-container {
            display: none;
        }

        .results-container.active {
            display: block;
        }

        .results-card {
            background: white;
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .results-icon {
            width: 5rem;
            height: 5rem;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .results-icon svg {
            width: 2.5rem;
            height: 2.5rem;
        }

        .score-display {
            font-size: 3rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }

        .score-label {
            font-size: 1.25rem;
            color: #6b7280;
            margin-bottom: 1.5rem;
        }

        .level-badge {
            display: inline-block;
            padding: 0.5rem 1.5rem;
            border-radius: 9999px;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .level-badge.minimal {
            background: #d1fae5;
            color: #065f46;
        }

        .level-badge.mild {
            background: #fef3c7;
            color: #92400e;
        }

        .level-badge.moderate {
            background: #fed7aa;
            color: #9a3412;
        }

        .level-badge.severe {
            background: #fecaca;
            color: #991b1b;
        }

        .recommendations {
            background: #eff6ff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            border: 1px solid #bfdbfe;
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .recommendations h3 {
            font-size: 1.125rem;
            font-weight: 500;
            color: #1e40af;
            margin-bottom: 1rem;
        }

        .recommendation-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .recommendation-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .recommendation-item svg {
            width: 1.25rem;
            height: 1.25rem;
            color: #2563eb;
            flex-shrink: 0;
            margin-top: 0.125rem;
        }

        .recommendation-item p {
            color: #1e40af;
            font-size: 0.875rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .action-buttons .btn {
            flex: 1;
            min-width: 200px;
        }

        /* History */
        .history-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .history-card {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }

        .history-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .history-header h4 {
            font-size: 1rem;
            font-weight: 500;
            color: #1a1a1a;
        }

        .history-date {
            font-size: 0.875rem;
            color: #6b7280;
        }

        .history-score {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .history-score-value {
            font-size: 1.5rem;
            font-weight: 500;
            color: #2563eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1>Self-Assessment Tools</h1>
            <p>Understand your mental health with evidence-based assessments</p>
        </div>

        <!-- Assessment Selection Screen -->
        <div id="selectionScreen">
            <div class="assessment-grid">
                <!-- Stress Assessment -->
                <div class="assessment-card" onclick="startAssessment('stress')">
                    <div class="assessment-header">
                        <div class="assessment-icon" style="background: #fef3c7;">
                            <svg fill="none" viewBox="0 0 24 24" stroke="#f59e0b" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                            </svg>
                        </div>
                        <div style="flex: 1;">
                            <h3>Stress Level Assessment</h3>
                        </div>
                    </div>
                    <p>Evaluate your current stress levels and identify potential stressors in your life.</p>
                    <div class="assessment-meta">
                        <div class="assessment-meta-item">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            10 questions
                        </div>
                        <div class="assessment-meta-item">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            5 min
                        </div>
                    </div>
                </div>

                <!-- Anxiety Assessment -->
                <div class="assessment-card" onclick="startAssessment('anxiety')">
                    <div class="assessment-header">
                        <div class="assessment-icon" style="background: #dbeafe;">
                            <svg fill="none" viewBox="0 0 24 24" stroke="#2563eb" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                            </svg>
                        </div>
                        <div style="flex: 1;">
                            <h3>Anxiety Screening (GAD-7)</h3>
                        </div>
                    </div>
                    <p>Measure your anxiety levels using the clinically validated GAD-7 scale.</p>
                    <div class="assessment-meta">
                        <div class="assessment-meta-item">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            7 questions
                        </div>
                        <div class="assessment-meta-item">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            3 min
                        </div>
                    </div>
                </div>

                <!-- Depression Assessment -->
                <div class="assessment-card" onclick="startAssessment('depression')">
                    <div class="assessment-header">
                        <div class="assessment-icon" style="background: #e9d5ff;">
                            <svg fill="none" viewBox="0 0 24 24" stroke="#9333ea" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                            </svg>
                        </div>
                        <div style="flex: 1;">
                            <h3>Depression Screening (PHQ-9)</h3>
                        </div>
                    </div>
                    <p>Assess depression symptoms using the Patient Health Questionnaire (PHQ-9).</p>
                    <div class="assessment-meta">
                        <div class="assessment-meta-item">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            9 questions
                        </div>
                        <div class="assessment-meta-item">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            4 min
                        </div>
                    </div>
                </div>

                <!-- Wellbeing Assessment -->
                <div class="assessment-card" onclick="startAssessment('wellbeing')">
                    <div class="assessment-header">
                        <div class="assessment-icon" style="background: #d1fae5;">
                            <svg fill="none" viewBox="0 0 24 24" stroke="#10b981" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
                            </svg>
                        </div>
                        <div style="flex: 1;">
                            <h3>Overall Wellbeing Check</h3>
                        </div>
                    </div>
                    <p>Evaluate your overall mental and emotional wellbeing across multiple dimensions.</p>
                    <div class="assessment-meta">
                        <div class="assessment-meta-item">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            12 questions
                        </div>
                        <div class="assessment-meta-item">
                            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            6 min
                        </div>
                    </div>
                </div>
            </div>

            <!-- Assessment History -->
            <div style="margin-top: 2rem;">
                <h2 style="font-size: 1.5rem; font-weight: 500; margin-bottom: 1rem;">Recent Assessments</h2>
                <div class="history-list">
                    <div class="history-card">
                        <div class="history-header">
                            <h4>Stress Level Assessment</h4>
                            <span class="history-date">Nov 28, 2025</span>
                        </div>
                        <div class="history-score">
                            <div class="history-score-value">16/40</div>
                            <span class="level-badge moderate">Moderate Stress</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz Screen -->
        <div id="quizScreen" class="quiz-container">
            <div class="quiz-header">
                <h2 class="quiz-title" id="quizTitle">Stress Level Assessment</h2>
                <div class="quiz-progress">
                    <span id="questionCounter">Question 1 of 10</span>
                    <span id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 0%;"></div>
                </div>
            </div>

            <div class="question-card">
                <div class="question-number" id="questionNum">Question 1</div>
                <div class="question-text" id="questionText">How often have you felt overwhelmed by your responsibilities?</div>
                
                <div class="options" id="optionsContainer">
                    <div class="option" onclick="selectOption(this, 0)">
                        <input type="radio" name="answer" id="opt0" value="0">
                        <label for="opt0">Not at all</label>
                    </div>
                    <div class="option" onclick="selectOption(this, 1)">
                        <input type="radio" name="answer" id="opt1" value="1">
                        <label for="opt1">Several days</label>
                    </div>
                    <div class="option" onclick="selectOption(this, 2)">
                        <input type="radio" name="answer" id="opt2" value="2">
                        <label for="opt2">More than half the days</label>
                    </div>
                    <div class="option" onclick="selectOption(this, 3)">
                        <input type="radio" name="answer" id="opt3" value="3">
                        <label for="opt3">Nearly every day</label>
                    </div>
                </div>
            </div>

            <div class="navigation-buttons">
                <button class="btn btn-outline" id="prevBtn" onclick="previousQuestion()" disabled>Previous</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>Next</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="results-container">
            <div class="results-card">
                <div class="results-icon" style="background: #fef3c7;">
                    <svg fill="none" viewBox="0 0 24 24" stroke="#f59e0b" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h2 style="font-size: 1.5rem; font-weight: 500; margin-bottom: 0.5rem;">Assessment Complete</h2>
                <div class="score-display" id="scoreDisplay">16/40</div>
                <div class="score-label">Your Score</div>
                <span class="level-badge moderate" id="levelBadge">Moderate Stress</span>
            </div>

            <div class="recommendations">
                <h3>Recommendations Based on Your Results</h3>
                <div class="recommendation-list">
                    <div class="recommendation-item">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p>Practice daily mindfulness meditation for 10-15 minutes to reduce stress levels</p>
                    </div>
                    <div class="recommendation-item">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p>Consider scheduling a session with one of our mental health professionals</p>
                    </div>
                    <div class="recommendation-item">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <p>Explore our stress management learning modules for evidence-based coping strategies</p>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-outline" onclick="retakeAssessment()">Retake Assessment</button>
                <button class="btn btn-primary" onclick="navigateTo('booking')">Book a Session</button>
            </div>
        </div>
    </div>

    <script>
        let currentQuestion = 0;
        let totalQuestions = 10;
        let answers = [];
        let currentAssessmentType = '';

        // Sample questions (in real app, load from server)
        const questions = {
            stress: [
                { text: "How often have you felt overwhelmed by your responsibilities?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] },
                { text: "How often have you had trouble relaxing?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] },
                { text: "How often have you felt irritable or easily angered?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] },
                { text: "How often have you had difficulty concentrating?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] },
                { text: "How often have you had trouble sleeping?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] },
                { text: "How often have you felt nervous or on edge?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] },
                { text: "How often have you worried about things?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] },
                { text: "How often have you felt tense or wound up?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] },
                { text: "How often have you had headaches or muscle tension?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] },
                { text: "How often have you felt unable to control worrying?", options: ["Not at all", "Several days", "More than half the days", "Nearly every day"] }
            ]
        };

        function startAssessment(type) {
            currentAssessmentType = type;
            currentQuestion = 0;
            answers = [];
            
            // Hide selection, show quiz
            document.getElementById('selectionScreen').style.display = 'none';
            document.getElementById('quizScreen').classList.add('active');
            
            loadQuestion();
        }

        function loadQuestion() {
            const question = questions.stress[currentQuestion];
            
            document.getElementById('questionNum').textContent = `Question ${currentQuestion + 1}`;
            document.getElementById('questionText').textContent = question.text;
            document.getElementById('questionCounter').textContent = `Question ${currentQuestion + 1} of ${totalQuestions}`;
            
            // Update progress
            const progress = ((currentQuestion + 1) / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressPercent').textContent = Math.round(progress) + '%';
            
            // Clear selections
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('input[name="answer"]').forEach(input => input.checked = false);
            
            // Update buttons
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = true;
            document.getElementById('nextBtn').textContent = currentQuestion === totalQuestions - 1 ? 'Finish' : 'Next';
        }

        function selectOption(element, value) {
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            
            answers[currentQuestion] = value;
            document.getElementById('nextBtn').disabled = false;
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
                
                // Restore previous answer if exists
                if (answers[currentQuestion] !== undefined) {
                    const value = answers[currentQuestion];
                    document.getElementById('opt' + value).checked = true;
                    document.querySelectorAll('.option')[value].classList.add('selected');
                    document.getElementById('nextBtn').disabled = false;
                }
            }
        }

        function nextQuestion() {
            if (currentQuestion < totalQuestions - 1) {
                currentQuestion++;
                loadQuestion();
                
                // Restore previous answer if exists
                if (answers[currentQuestion] !== undefined) {
                    const value = answers[currentQuestion];
                    document.getElementById('opt' + value).checked = true;
                    document.querySelectorAll('.option')[value].classList.add('selected');
                    document.getElementById('nextBtn').disabled = false;
                }
            } else {
                // Finish assessment
                showResults();
            }
        }

        function showResults() {
            // Calculate score
            const score = answers.reduce((sum, val) => sum + val, 0);
            const maxScore = totalQuestions * 3;
            
            // Determine level
            let level, levelClass;
            if (score <= 10) {
                level = "Minimal Stress";
                levelClass = "minimal";
            } else if (score <= 20) {
                level = "Mild Stress";
                levelClass = "mild";
            } else if (score <= 30) {
                level = "Moderate Stress";
                levelClass = "moderate";
            } else {
                level = "Severe Stress";
                levelClass = "severe";
            }
            
            // Update results display
            document.getElementById('scoreDisplay').textContent = `${score}/${maxScore}`;
            document.getElementById('levelBadge').textContent = level;
            document.getElementById('levelBadge').className = 'level-badge ' + levelClass;
            
            // Hide quiz, show results
            document.getElementById('quizScreen').classList.remove('active');
            document.getElementById('resultsScreen').classList.add('active');
            
            // In JSP: save results to database
            // fetch('/soulspace/assessment/save', { method: 'POST', body: JSON.stringify({ type: currentAssessmentType, score, level }) })
        }

        function retakeAssessment() {
            document.getElementById('resultsScreen').classList.remove('active');
            document.getElementById('selectionScreen').style.display = 'block';
        }

        function navigateTo(page) {
            // window.location.href = '/soulspace/' + page;
            alert('Navigating to ' + page);
        }
    </script>
</body>
</html>
